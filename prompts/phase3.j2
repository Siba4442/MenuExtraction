{
    "task": "Analyze the provided menu image and extract detailed structured menu data for the specified category.",

    "context": [
        "The page number is: {{ page_number }} of the menu.",
        "The restaurant name is: {{ restaurant_name }}",
    ],

    "instructions": [
        "You are given a single category and its items extracted from a previous OCR/detection stage.",
        "Your task is to re-read the image and precisely extract structured information ONLY for this category.",
        "DO NOT create new categories. DO NOT rename the category. Use the category name EXACTLY as provided.",
        "The category block (category name + descriptions) is provided below:",
        {{ category }},

        "For the given category, extract the following:",
        "- Base Ingredient: Which is the main ingredient of the item (e.g for coffee it can be type of milks). If not specified, return null.",
        "- Base Ingredient Price: Price associated with the base ingredient. If not specified, return null.",
        "- Base ingredient Price with variations: If there are variations for the whole category, extract them with their prices. If not specified, return null.",
        "- This data can be in the description of the category.",
        "- The description of the category is mention if avaliable in the menu, in the context block of the prompt."
        "- Still make sure from the provided image if there is any other description for the category.",
        "- There are default options for some categories, extract them as base ingredients and put default as true.",
        "- Read the menu image carefully to find all default base ingredients that could be include in the description of the category.",
        "- If the category has description the semantically analyze it to find the default base ingredients, base ingredients and their prices.",
        "- Don't leave out the default options if there are any.",
        "- As the cost of default items is included in the items price keep the base ingredient price as null for default base ingredient.",
        "- When extracting price, for the base ingredient which is not default mention the exact price as shown in the menu image not the absolute price.",
        "- Apply the same logic if there is subcategories under the main category.",
        "- if there is no subcategories keep the subcategories_base as empty list.",

    "Additionally":
        "- Extract category-level addons IF they apply to the entire category.",
        
    "VERY IMPORTANT RULES:",
        "- DO NOT hallucinate any data (variations or prices).",
        "- The items details is mentioned in the context block of the prompt so, make sure not to include them as the base ingredients.",
        "- If a field is not shown in the image, return null for that field.",
        "- Output MUST strictly follow the provided schema.",
        "- Return ONLY the JSON output. No explanation, no commentary, no markdown."

    "output_format": {
        "name_raw": "string" (category name),
        "base_options" : [
            {
                name_raw: "string" (base ingredient name),
                price: {
                    amount: "float or null",
                    currency: "string or null"
                } or null,
                price_by_variations: [
                    {
                        variation_name: "string or null",
                        price: {
                            amount: "float or null",
                            currency: "string or null"
                        } or null
                    }
                ] or null
            }
        ],
        "subcategories_base": [
            {
                name_raw: "string" (base ingredient name),
                    price: {
                        amount: "float or null",
                        currency: "string or null"
                    } or null,
                    price_by_variations: [
                        {
                            variation_name: "string or null",
                            price: {
                                amount: "float or null",
                                currency: "string or null"
                            } or null
                        }
                    ] or null
            }
        ]
    }

    "additional_constraints": [
        "The output MUST be valid JSON.",
        "DO NOT include fields not present in the schema.",
        "Prices must be numeric floats.",
        "Return null for all missing or unavailable data.",
        "DO NOT infer or guess information."
    ]
}